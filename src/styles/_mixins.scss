// ============================================
// RESPONSIVE MIXINS - MOBILE FIRST
// ============================================

@use "sass:map";
@use "variables.scss" as *;

// ============================================
// MEDIA QUERY MIXINS - Mobile First
// ============================================
@mixin respond-above($breakpoint) {
  @if $breakpoint == sm {
    @media (min-width: $breakpoint-sm) {
      @content;
    }
  } @else if $breakpoint == md {
    @media (min-width: $breakpoint-md) {
      @content;
    }
  } @else if $breakpoint == lg {
    @media (min-width: $breakpoint-lg) {
      @content;
    }
  } @else if $breakpoint == xl {
    @media (min-width: $breakpoint-xl) {
      @content;
    }
  } @else if $breakpoint == 2xl {
    @media (min-width: $breakpoint-2xl) {
      @content;
    }
  }
}

@mixin respond-below($breakpoint) {
  @if $breakpoint == sm {
    @media (max-width: #{$breakpoint-sm - 1px}) {
      @content;
    }
  } @else if $breakpoint == md {
    @media (max-width: #{$breakpoint-md - 1px}) {
      @content;
    }
  } @else if $breakpoint == lg {
    @media (max-width: #{$breakpoint-lg - 1px}) {
      @content;
    }
  } @else if $breakpoint == xl {
    @media (max-width: #{$breakpoint-xl - 1px}) {
      @content;
    }
  } @else if $breakpoint == 2xl {
    @media (max-width: #{$breakpoint-2xl - 1px}) {
      @content;
    }
  }
}

@mixin respond-between($min, $max) {
  $min-width: 0;
  $max-width: 9999px;

  @if $min == sm {
    $min-width: $breakpoint-sm;
  } @else if $min == md {
    $min-width: $breakpoint-md;
  } @else if $min == lg {
    $min-width: $breakpoint-lg;
  } @else if $min == xl {
    $min-width: $breakpoint-xl;
  } @else if $min == 2xl {
    $min-width: $breakpoint-2xl;
  }

  @if $max == sm {
    $max-width: $breakpoint-sm - 1px;
  } @else if $max == md {
    $max-width: $breakpoint-md - 1px;
  } @else if $max == lg {
    $max-width: $breakpoint-lg - 1px;
  } @else if $max == xl {
    $max-width: $breakpoint-xl - 1px;
  } @else if $max == 2xl {
    $max-width: $breakpoint-2xl - 1px;
  }

  @media (min-width: $min-width) and (max-width: $max-width) {
    @content;
  }
}

// ============================================
// FLUID SIZING MIXINS
// ============================================
@mixin fluid-size($property, $min, $max, $min-vw: 320px, $max-vw: 1920px) {
  #{$property}: clamp(
    #{$min},
    calc(
      #{$min} + (#{strip-unit($max)} - #{strip-unit($min)}) *
        ((100vw - #{$min-vw}) / (#{strip-unit($max-vw)} - #{strip-unit($min-vw)}))
    ),
    #{$max}
  );
}

@function strip-unit($number) {
  @if type-of($number) == "number" and not unitless($number) {
    @return $number / ($number * 0 + 1);
  }

  @return $number;
}

// ============================================
// COMPONENT SIZE MIXINS - Fully Responsive
// ============================================

// Button sizes - Mobile First
@mixin responsive-button-size($size) {
  @if $size == sm {
    padding: $spacing-xs $spacing-sm;
    font-size: $font-size-xs;
    min-height: 2rem;

    @include respond-above(md) {
      padding: $spacing-xs $spacing-md;
      min-height: 2.25rem;
    }

    @include respond-above(lg) {
      padding: $spacing-xs $spacing-lg;
    }
  } @else if $size == md {
    padding: $spacing-sm $spacing-md;
    font-size: $font-size-sm;
    min-height: 2.5rem;

    @include respond-above(md) {
      padding: $spacing-sm $spacing-lg;
      min-height: 2.75rem;
    }

    @include respond-above(lg) {
      padding: $spacing-sm $spacing-xl;
      min-height: 3rem;
    }
  } @else if $size == lg {
    padding: $spacing-md $spacing-lg;
    font-size: $font-size-base;
    min-height: 3rem;

    @include respond-above(md) {
      padding: $spacing-md $spacing-xl;
      min-height: 3.5rem;
    }

    @include respond-above(lg) {
      padding: $spacing-md $spacing-2xl;
      min-height: 4rem;
    }
  } @else if $size == xl {
    padding: $spacing-lg $spacing-xl;
    font-size: $font-size-lg;
    min-height: 3.5rem;

    @include respond-above(md) {
      padding: $spacing-lg $spacing-2xl;
      min-height: 4rem;
    }

    @include respond-above(lg) {
      padding: $spacing-xl $spacing-3xl;
      min-height: 4.5rem;
    }
  }
}

// Card sizes - Fully Flexible
@mixin responsive-card-size($size) {
  @if $size == sm {
    padding: $spacing-md;
    width: 100%;
    max-width: 100%;

    @include respond-above(sm) {
      max-width: 20rem;
    }

    @include respond-above(md) {
      padding: $spacing-lg;
      max-width: 24rem;
    }

    @include respond-above(lg) {
      padding: $spacing-xl;
      max-width: 28rem;
    }
  } @else if $size == md {
    padding: $spacing-lg;
    width: 100%;
    max-width: 100%;

    @include respond-above(sm) {
      max-width: 24rem;
    }

    @include respond-above(md) {
      padding: $spacing-xl;
      max-width: 32rem;
    }

    @include respond-above(lg) {
      padding: $spacing-2xl;
      max-width: 40rem;
    }
  } @else if $size == lg {
    padding: $spacing-xl;
    width: 100%;
    max-width: 100%;

    @include respond-above(sm) {
      max-width: 28rem;
    }

    @include respond-above(md) {
      padding: $spacing-2xl;
      max-width: 40rem;
    }

    @include respond-above(lg) {
      max-width: 48rem;
    }
  } @else if $size == xl {
    padding: $spacing-2xl;
    width: 100%;
    max-width: 100%;

    @include respond-above(sm) {
      max-width: 40rem;
    }

    @include respond-above(md) {
      max-width: 60rem;
    }

    @include respond-above(lg) {
      max-width: 80rem;
    }

    @include respond-above(xl) {
      max-width: 100%;
    }
  }
}

// ============================================
// UTILITY MIXINS (pozosta≈Çe bez zmian)
// ============================================

@mixin border-radius-variant($size) {
  $map: (
    none: 0,
    sm: $border-radius-sm,
    md: $border-radius-md,
    lg: $border-radius-lg,
    xl: $border-radius-xl
  );
  $value: map.get($map, $size);

  &--border-radius-#{$size} {
    border-radius: $value;
  }
}

@mixin border-width-variant($size) {
  $map: (
    none: 0,
    thin: $border-width-thin,
    medium: $border-width-medium,
    thick: $border-width-thick
  );
  $value: map.get($map, $size);

  &--border-width-#{$size} {
    border-width: $value;
  }
}

$shadows: (
  light: 0 2px 4px var(--pta-color-shadow, #{$pta-color-light-shadow}),
  medium: 0 4px 8px var(--pta-color-shadow-medium, #{$pta-color-light-shadow-medium}),
  heavy: 0 6px 12px var(--pta-color-shadow-heavy, #{$pta-color-light-shadow-heavy}),
  none: none
);

@mixin shadow-variant($type) {
  $value: map.get($shadows, $type);
  &--#{$type} {
    box-shadow: $value;
  }
}

$semantic-colors: (
  success: $pta-color-light-success,
  error: $pta-color-light-error,
  warning: $pta-color-light-warning,
  info: $pta-color-light-info
);

@mixin semantic-border-color-variant($state) {
  $color: map.get($semantic-colors, $state);
  &--state-#{$state} {
    border-color: var(--pta-color-#{$state}, $color);
  }
}

@mixin semantic-border-variant($state) {
  $color: map.get($semantic-colors, $state);
  &--state-#{$state} {
    border: 2px solid var(--pta-color-#{$state}, $color);
  }
}

$directions: (
  row: row,
  column: column,
  row-reverse: row-reverse,
  column-reverse: column-reverse
);

@mixin direction-variant($direction) {
  $value: map.get($directions, $direction);
  &--direction-#{$direction} {
    flex-direction: $value;
  }
}

$justify-options: (
  start: flex-start,
  center: center,
  end: flex-end,
  between: space-between,
  around: space-around,
  evenly: space-evenly
);

@mixin justify-variant($justify) {
  $value: map.get($justify-options, $justify);
  &--justify-#{$justify} {
    justify-content: $value;
  }
}

$align-options: (
  start: flex-start,
  center: center,
  end: flex-end,
  stretch: stretch,
  baseline: baseline
);

@mixin align-variant($align) {
  $value: map.get($align-options, $align);
  &--align-#{$align} {
    align-items: $value;
  }
}

@mixin gap-variant($size) {
  $map: (
    xs: $spacing-xs,
    sm: $spacing-sm,
    md: $spacing-md,
    lg: $spacing-lg,
    xl: $spacing-xl,
    2xl: $spacing-2xl
  );
  $value: map.get($map, $size);
  &--gap-#{$size} {
    gap: $value;
  }
}

$grid-auto-flow-options: (
  row: row,
  column: column,
  dense: dense,
  row-dense: row dense,
  column-dense: column dense
);

@mixin grid-auto-flow-variant($flow) {
  $value: map.get($grid-auto-flow-options, $flow);
  &--grid-auto-flow-#{$flow} {
    grid-auto-flow: $value;
  }
}

// ============================================
// CONTAINER MIXIN
// ============================================
@mixin container($size: null) {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: $spacing-md;
  padding-right: $spacing-md;

  @include respond-above(md) {
    padding-left: $spacing-lg;
    padding-right: $spacing-lg;
  }

  @if $size == sm {
    max-width: $container-sm;
  } @else if $size == md {
    max-width: $container-md;
  } @else if $size == lg {
    max-width: $container-lg;
  } @else if $size == xl {
    max-width: $container-xl;
  } @else if $size == 2xl {
    max-width: $container-2xl;
  } @else {
    max-width: 100%;
  }
}

// ============================================
// ASPECT RATIO MIXIN
// ============================================
@mixin aspect-ratio($width, $height) {
  aspect-ratio: #{$width} / #{$height};

  @supports not (aspect-ratio: #{$width} / #{$height}) {
    &::before {
      content: "";
      display: block;
      padding-top: calc(#{$height} / #{$width} * 100%);
    }
  }
}

// ============================================
// VISUALLY HIDDEN MIXIN
// ============================================
@mixin visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// ============================================
// SHADOW & BORDER MIXINS - DRY with Maps
// ============================================

// Shadow variants map
$shadow-values: (
  none: none,
  light: $shadow-light,
  medium: $shadow-medium,
  heavy: $shadow-heavy
);

@mixin shadow-variant($shadow) {
  $value: map.get($shadow-values, $shadow);
  &--#{$shadow} {
    box-shadow: $value;
  }
}

// Border radius variants map
$border-radius-map: (
  none: 0,
  sm: $border-radius-sm,
  md: $border-radius-md,
  lg: $border-radius-lg,
  xl: $border-radius-xl,
  2xl: $border-radius-2xl
);

@mixin border-radius-variant($size) {
  $value: map.get($border-radius-map, $size);
  &--border-radius-#{$size} {
    border-radius: $value;
  }
}

// Border width variants map
$border-width-map: (
  none: 0,
  thin: $border-width-thin,
  medium: $border-width-medium,
  thick: $border-width-thick
);

@mixin border-width-variant($size) {
  $value: map.get($border-width-map, $size);
  &--border-width-#{$size} {
    border-width: $value;
  }
}

// Semantic background variant
@mixin semantic-bg-variant($state) {
  $color: map.get($semantic-colors, $state);
  &--state-#{$state} {
    background-color: var(--pta-color-#{$state}, $color);
  }
}

// ============================================
// BUTTON VARIANT MIXIN
// ============================================

@mixin button-variant($bg-var, $text-var, $hover-var, $active-var: null) {
  background-color: var(#{$bg-var});
  color: var(#{$text-var});

  &:hover:not(:disabled) {
    background-color: var(#{$hover-var});
  }

  @if $active-var {
    &:active:not(:disabled) {
      background-color: var(#{$active-var});
    }
  }
}
